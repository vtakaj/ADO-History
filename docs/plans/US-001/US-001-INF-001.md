# US-001-INF-001: シェルスクリプト基本構造作成

## Task Overview
ado-tracker.shシェルスクリプトの基本構造、メイン関数、コマンドライン引数処理を実装する。

## Acceptance Criteria
- [ ] 実行可能なシェルスクリプトファイルの作成
- [ ] コマンドライン引数解析機能
- [ ] メイン処理フローの実装
- [ ] 使用方法（usage）の表示機能
- [ ] 基本的なバリデーション機能
- [ ] エラー時の適切な終了コード設定

## Technical Requirements
- bash shebang（#!/bin/bash）の設定
- set -euo pipefail による厳密モード
- 引数チェックと使用方法表示
- 関数ベースの構造化プログラミング
- 終了コードの適切な管理

## Implementation Details
```bash
#!/bin/bash
set -euo pipefail

# グローバル変数
SCRIPT_NAME="$(basename "$0")"
VERSION="1.0.0"

# 使用方法表示
show_usage() {
    cat << EOF
Usage: $SCRIPT_NAME <command> [options]

Commands:
  fetch <project> [days]     チケット履歴を取得
  help                       このヘルプを表示

Options:
  -h, --help                 ヘルプを表示
  -v, --version              バージョンを表示

Examples:
  $SCRIPT_NAME fetch MyProject 30
  $SCRIPT_NAME help
EOF
}

# メイン処理
main() {
    local command="${1:-}"
    
    case "$command" in
        fetch)
            cmd_fetch "${@:2}"
            ;;
        help|--help|-h)
            show_usage
            ;;
        --version|-v)
            echo "$SCRIPT_NAME v$VERSION"
            ;;
        "")
            echo "Error: コマンドを指定してください" >&2
            show_usage >&2
            exit 1
            ;;
        *)
            echo "Error: 不明なコマンド: $command" >&2
            show_usage >&2
            exit 1
            ;;
    esac
}

# コマンド実装（後で実装される）
cmd_fetch() {
    echo "fetch コマンドの実装予定地"
}

# スクリプト実行
if [[ "${BASH_SOURCE[0]}" == "${0}" ]]; then
    main "$@"
fi
```

## File Structure
```
ado-tracker.sh
├── Header（shebang, set options）
├── Global Variables
├── Utility Functions
├── Command Functions
├── Main Function
└── Script Execution
```

## Validation Features
```bash
# 引数バリデーション
validate_project_name() {
    local project="$1"
    
    if [[ -z "$project" ]]; then
        echo "Error: プロジェクト名を指定してください" >&2
        return 1
    fi
    
    if [[ ! "$project" =~ ^[a-zA-Z0-9_-]+$ ]]; then
        echo "Error: プロジェクト名に無効な文字が含まれています" >&2
        return 1
    fi
}

# 数値バリデーション
validate_days() {
    local days="$1"
    
    if [[ ! "$days" =~ ^[0-9]+$ ]] || [[ "$days" -lt 1 ]] || [[ "$days" -gt 365 ]]; then
        echo "Error: 日数は1-365の範囲で指定してください" >&2
        return 1
    fi
}
```

## Exit Codes
- 0: 正常終了
- 1: 引数エラー・一般的なエラー
- 2: 設定エラー
- 3: API接続エラー
- 4: ファイルI/Oエラー

## Definition of Done
- chmod +x で実行可能なシェルスクリプトが作成される
- --help でusageが表示される
- 不正な引数で適切なエラーメッセージが表示される
- 基本的なコマンド構造が実装される
- エラー時に適切な終了コードが返される

## Dependencies
なし（最初に実装するタスク）

## Estimated Effort
2 hours

## Testing Strategy
- 引数なしでの実行テスト
- --help オプションのテスト
- 不正なコマンドでのエラーテスト
- 実行権限の確認